<div class="swiper sample-slider">
    <div class="swiper-wrapper">
        <!-- Preloaded Slides (Left) -->
        <div class="swiper-slide" id="slide-2">
            <!-- Preloaded Image (URL1) -->
        </div>
        <div class="swiper-slide" id="slide-1">
            <!-- Preloaded Image (URL2) -->
        </div>
        <!-- Active Slide (Center) -->
        <div class="swiper-slide" id="slide0">
            <!-- Current Image (URL3) -->
        </div>
        <!-- Preloaded Slides (Right) -->
        <div class="swiper-slide" id="slide1">
            <!-- Preloaded Image (URL4) -->
        </div>
        <div class="swiper-slide" id="slide2">
            <!-- Preloaded Image (URL5) -->
        </div>
    </div>
</div>


<script>
    const swiper = new Swiper('.sample-slider', {
        direction: "horizontal",
        initialSlide: 2, // Start with the active slide in the center
        loop: true, // Enable looping

        on: {
            init: async function () {
                // Load initial slides
                await loadSlides(this.activeIndex);
            },
            slideChange: async function () {
                // Load new slides when slide changes
                await loadSlides(this.activeIndex);
            },
        },
    });

    // Function to load slides based on the active index
    async function loadSlides(activeIndex) {
        const slidesWrapper = document.querySelector('.swiper-wrapper');

        // Remove the old slides
        for (let i = -2; i <= 2; i++) {
            const slideToRemove = document.getElementById(`slide${activeIndex + i}`);
            if (slideToRemove) {
                slidesWrapper.removeChild(slideToRemove);
            }
        }

        // Add new slides
        for (let i = activeIndex - 2; i <= activeIndex + 2; i++) {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.id = `slide${i}`;

            if (i === activeIndex) {
                const imageURL = await generateImageURL();
                slide.innerHTML = `<img src="${imageURL}" alt="Swoosh Image" class="w-full h-full object-cover">`;
            }

            slidesWrapper.appendChild(slide);
        }
    }

    async function generateImageURL() {
        const response = await fetch('https://source.unsplash.com/random');
        const imageURL = response.url;
        return imageURL;
    }
</script>
